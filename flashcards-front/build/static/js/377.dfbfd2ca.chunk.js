"use strict";(self.webpackChunkflashcards_front=self.webpackChunkflashcards_front||[]).push([[377],{377:(e,a,s)=>{s.r(a),s.d(a,{default:()=>_});var t=s(43),n=s(872),r=s(854),c=s(579);function l(e){let{index:a,question:s,answer:t,onChange:n,onRemove:r}=e;const l=(e,s)=>{n(a,e,s)};return(0,c.jsxs)("div",{className:"card",children:[(0,c.jsxs)("div",{className:"card__nav",children:[(0,c.jsx)("div",{className:"card__index",children:a+1}),(0,c.jsx)("button",{className:"card__delete",onClick:()=>r(a),type:"button",children:(0,c.jsx)("img",{src:"/img/deleteCard.svg",alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"})})]}),(0,c.jsxs)("div",{className:"card__content",children:[(0,c.jsxs)("div",{className:"card__input__wrapper",children:[(0,c.jsx)("input",{maxLength:250,type:"text",className:"card__question",placeholder:"_",value:s,onChange:e=>l("question",e.target.value),required:!0}),(0,c.jsx)("div",{className:"card__input__caption",children:"\u0422\u0415\u0420\u041c\u0418\u041d"})]}),(0,c.jsxs)("div",{className:"card__input__wrapper",children:[(0,c.jsx)("input",{maxLength:250,type:"text",className:"card__answer",placeholder:"_",value:t,onChange:e=>l("answer",e.target.value),required:!0}),(0,c.jsx)("div",{className:"card__input__caption",children:"\u041e\u041f\u0420\u0415\u0414\u0415\u041b\u0415\u041d\u0418\u0415"})]})]})]})}var i=s(491),o=s(900),d=s(719);function _(){const{id:e}=(0,o.g)(),[a,s]=(0,t.useState)(""),[_,u]=(0,t.useState)([{question:"",answer:""}]),[m,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)(!1),j=(0,o.Zp)(),[v,w]=(0,t.useState)(!1),[g,N]=(0,t.useState)(""),[b,f]=(0,t.useState)(!1),[y,C]=(0,t.useState)(!1);(0,t.useEffect)((()=>{e&&(x(!0),(0,i.IC)(e).then((e=>{s(e.title),p(e.is_public);const a=Object.entries(e.cards).map((e=>{let[a,s]=e;return{question:a,answer:s}}));u(a)})).catch((()=>{alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u0430\u0431\u043e\u0440")})))}),[e]);const k=(e,a,s)=>{const t=[..._];t[e][a]=s,u(t)},q=e=>{const a=_.filter(((a,s)=>s!==e));u(a)};return(0,c.jsxs)("div",{className:"createset",children:[(0,c.jsx)(n.A,{}),(0,c.jsxs)("div",{className:"createset__content",children:[(0,c.jsx)(r.A,{}),(0,c.jsxs)("form",{className:"createset__module",onSubmit:async t=>{t.preventDefault();const n={title:a,is_public:m,cards:Object.fromEntries(_.map((e=>[e.question,e.answer])))};try{h?(await(0,i.Xj)(e,n),alert("\u041d\u0430\u0431\u043e\u0440 \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!"),j("/library")):(await(0,i.vv)(n),alert("\u041d\u0430\u0431\u043e\u0440 \u0441\u043e\u0437\u0434\u0430\u043d!"),s(""),u([{question:"",answer:""}]),j("/library"))}catch{alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438")}},children:[(0,c.jsxs)("div",{className:"module__header__row",children:[(0,c.jsx)("div",{className:"module__title",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043d\u0430\u0431\u043e\u0440"}),(0,c.jsx)("button",{className:"module__create",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),(0,c.jsxs)("div",{className:"module__info__column",children:[(0,c.jsx)("input",{type:"text",maxLength:25,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435...",value:a,onChange:e=>s(e.target.value),required:!0,className:"module__info__input"}),(0,c.jsxs)("div",{className:"module__info__row",children:[(0,c.jsxs)("button",{id:"btn-aicreate",className:"module__info__btn",onClick:()=>w(!0),children:[(0,c.jsx)("img",{src:"/img/aicreate.svg",alt:""}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0437 \u043a\u043e\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0432"]}),(0,c.jsxs)("button",{id:"btn-reword",className:"module__info__btn",onClick:async()=>{C(!0);try{const e=localStorage.getItem("jwtToken"),a=await(0,i.Jt)(e,_);if(!a.ok)throw new Error("GigaChat \u0432\u0435\u0440\u043d\u0443\u043b \u043e\u0448\u0438\u0431\u043a\u0443");const s=await a.json();u(s)}catch(e){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0444\u043e\u0440\u043c\u0443\u043b\u0438\u0440\u043e\u0432\u043a\u0435"),console.error(e)}finally{C(!1)}},disabled:y,children:[(0,c.jsx)("img",{src:"/img/aicreate.svg",alt:""}),y?"\u041f\u0435\u0440\u0435\u0444\u043e\u0440\u043c\u0443\u043b\u0438\u0440\u0443\u0435\u043c...":"\u041f\u0435\u0440\u0435\u0444\u043e\u0440\u043c\u0443\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441\u044b"]}),(0,c.jsxs)("label",{className:"module__info__checkbox",children:[(0,c.jsx)("input",{type:"checkbox",checked:m,onChange:e=>p(e.target.checked)}),"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0430\u0431\u043e\u0440 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u043c"]})]})]}),v&&(0,c.jsx)("div",{className:"popup__overlay",children:(0,c.jsxs)("div",{className:"popup__window",children:[(0,c.jsx)("div",{className:"popup__title",children:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043d\u0441\u043f\u0435\u043a\u0442\u0430"}),(0,c.jsx)("textarea",{className:"popup__textarea",maxLength:5e3,value:g,onChange:e=>N(e.target.value),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u043e 5000 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432...",rows:10,style:{width:"100%"}}),(0,c.jsxs)("div",{className:"popup__row",children:[(0,c.jsx)("button",{id:"popup__create",className:"popup__btn",onClick:async()=>{if(!g||g.length<10)alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430");else{f(!0);try{const e=localStorage.getItem("jwtToken"),a=await(0,d.R$)(e,g),s=await a.json();Array.isArray(s)?(u((e=>[...e,...s.map((e=>({question:e.question,answer:e.answer})))])),w(!1),N("")):alert("(\u0434\u0435\u0431\u0430\u0433) \u041c\u043e\u0434\u0435\u043b\u044c \u0432\u0435\u0440\u043d\u0443\u043b\u0430 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442")}catch(e){alert("(\u0434\u0435\u0431\u0430\u0433) \u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u043a GigaChat"),console.error(e)}finally{f(!1)}}},disabled:b,children:b?"\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043a\u043e\u043d\u0441\u043f\u0435\u043a\u0442\u0430"}),(0,c.jsx)("button",{id:"popup__cancel",className:"popup__btn",onClick:()=>w(!1),children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})}),_.map(((e,a)=>(0,c.jsx)(l,{index:a,question:e.question,answer:e.answer,onChange:k,onRemove:q},a))),(0,c.jsx)("div",{className:"createset__wrapper",children:(0,c.jsx)("button",{className:"createset__addcard",onClick:()=>{u([..._,{question:"",answer:""}])},children:"\u0414\u041e\u0411\u0410\u0412\u0418\u0422\u042c \u041a\u0410\u0420\u0422\u041e\u0427\u041a\u0423"})})]})]})]})}}}]);
//# sourceMappingURL=377.dfbfd2ca.chunk.js.map