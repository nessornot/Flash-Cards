{"version":3,"file":"static/js/609.98cfffdc.chunk.js","mappings":"wJAGA,MAaA,EAbuBA,IAAmB,IAAlB,SAAEC,GAAUD,EAChC,MAAME,GAAWC,EAAAA,EAAAA,MASjB,OAPAC,EAAAA,EAAAA,YAAU,KACQC,aAAaC,QAAQ,aAE/BJ,EAAS,WACb,GACD,CAACA,IAEGD,CAAQ,C,uGCNJ,SAASM,IACpB,MAAOC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,KAC1BC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,IAEnCR,GAAWC,EAAAA,EAAAA,MAyBjB,OACIU,EAAAA,EAAAA,KAACC,EAAAA,EAAc,CAAAb,UACfc,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUf,SAAA,EACrBY,EAAAA,EAAAA,KAACI,EAAAA,EAAM,KACPJ,EAAAA,EAAAA,KAAA,OAAKG,UAAU,oBAAmBf,UAC9BY,EAAAA,EAAAA,KAAA,OAAKG,UAAU,YAAWf,UACtBc,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2Bf,SAAA,EACtCY,EAAAA,EAAAA,KAAA,OAAKG,UAAU,kBAAiBf,SAAC,wEAGjCc,EAAAA,EAAAA,MAAA,QAAMC,UAAU,iBAAiBE,SAhChCC,UACjBC,EAAEC,iBAEF,IAEI,GAAwB,aADDC,EAAAA,EAAAA,IAAad,EAAMG,IAC7BY,OAET,YADAC,MAAM,yKAIV,MAAMC,QAAsBC,EAAAA,EAAAA,IAAUlB,EAAMG,GACtCgB,QAAaF,EAAcG,OAEjCvB,aAAawB,QAAQ,WAAYF,EAAKG,OAEtC5B,EAAS,WACb,CAAE,MAAO6B,GACLP,MAAM,gLACNQ,QAAQC,IAAIF,EAChB,GAawE9B,SAAA,EAEpDc,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAuBf,SAAA,EAClCY,EAAAA,EAAAA,KAAA,SAAOG,UAAU,+BACVkB,QAAQ,oBAAmBjC,SAAC,iGAGnCY,EAAAA,EAAAA,KAAA,SAAOsB,GAAG,oBAAoBC,KAAK,OAAOC,UAAQ,EAC3CC,YAAY,mEAAiBC,MAAO/B,EACpCgC,SAAWpB,GAAMX,EAAQW,EAAEqB,OAAOF,aAG7CxB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAuBf,SAAA,EAClCY,EAAAA,EAAAA,KAAA,SAAOG,UAAU,+BACVkB,QAAQ,oBAAmBjC,SAAC,0CAGnCY,EAAAA,EAAAA,KAAA,SAAOsB,GAAG,oBAAoBC,KAAK,WAAWC,UAAQ,EAC/CC,YAAY,qFAAoBC,MAAO5B,EAC9C6B,SAAWpB,GAAMR,EAAYQ,EAAEqB,OAAOF,aAG1C1B,EAAAA,EAAAA,KAAA,UAAQG,UAAU,mBAAmBoB,KAAK,SAAQnC,SAAC,qHAKvDc,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAuBf,SAAA,CAAC,wEAEnCY,EAAAA,EAAAA,KAAA,KAAG6B,KAAK,SAAS1B,UAAU,8BAA6Bf,SAAC,iDAUrF,C","sources":["components/RedirectIfAuth/RedirectIfAuth.js","pages/Register/Register.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nconst RedirectIfAuth = ({ children }) => {\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const token = localStorage.getItem('jwtToken');\n        if (token) {\n            navigate('/library');\n        }\n    }, [navigate]);\n\n    return children;\n};\n\nexport default RedirectIfAuth;","import React, { useState } from 'react'\nimport './Register.scss'\nimport Header from \"../../components/Header/header\"\nimport RedirectIfAuth from \"../../components/RedirectIfAuth/RedirectIfAuth\";\nimport {loginUser, registerUser} from \"../../services/auth\"\nimport { useNavigate} from \"react-router-dom\";\n\nexport default function Register() {\n    const [name, setName] = useState('');\n    const [password, setPassword] = useState('');\n\n    const navigate = useNavigate();\n\n    // ЗАДЕБАЖИТЬ авто логин при регистрации (DONE)\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        try {\n            const response = await registerUser(name, password);\n            if (response.status === 409) {\n                alert(\"Данное имя пользователя занято\");\n                return;\n            }\n\n            const loginResponse = await loginUser(name, password);\n            const data = await loginResponse.json();\n\n            localStorage.setItem('jwtToken', data.token);\n\n            navigate('/library');\n        } catch (error) {\n            alert(\"Ошибка при регистрации или входе\")\n            console.log(error)\n        }\n    };\n\n    return (\n        <RedirectIfAuth>\n        <div className=\"register\">\n            <Header />\n            <div className=\"register__content\">\n                <div className=\"container\">\n                    <div className=\"register__content__column\">\n                        <div className=\"register__title\">\n                            Регистрация\n                        </div>\n                        <form className=\"register__form\" onSubmit={handleSubmit}>\n\n                            <div className=\"register__form__group\">\n                                <label className=\"register__form__group__title\"\n                                       htmlFor=\"register-username\">\n                                    Имя пользователя\n                                </label>\n                                <input id=\"register-username\" type=\"text\" required // input\n                                       placeholder=\"Введите имя...\" value={name}\n                                       onChange={(e) => setName(e.target.value)}/>\n                            </div>\n\n                            <div className=\"register__form__group\">\n                                <label className=\"register__form__group__title\"\n                                       htmlFor=\"register-password\">\n                                    Пароль\n                                </label>\n                                <input id=\"register-password\" type=\"password\" required // input\n                                       placeholder=\"Введите пароль...\" value={password}\n                                onChange={(e) => setPassword(e.target.value)}/>\n                            </div>\n\n                            <button className=\"register__submit\" type=\"submit\">\n                                        Зарегистрироваться\n                            </button>\n\n                        </form>\n                        <div className=\"register__haveAccount\">\n                            Есть аккаунт?\n                            <a href=\"/login\" className=\"register__haveAccount__link\">\n                                Войти\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </RedirectIfAuth>\n    );\n}\n"],"names":["_ref","children","navigate","useNavigate","useEffect","localStorage","getItem","Register","name","setName","useState","password","setPassword","_jsx","RedirectIfAuth","_jsxs","className","Header","onSubmit","async","e","preventDefault","registerUser","status","alert","loginResponse","loginUser","data","json","setItem","token","error","console","log","htmlFor","id","type","required","placeholder","value","onChange","target","href"],"sourceRoot":""}